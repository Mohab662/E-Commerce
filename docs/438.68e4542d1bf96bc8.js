"use strict";(self.webpackChunkE_Commerce=self.webpackChunkE_Commerce||[]).push([[438],{7438:(b,m,c)=>{c.r(m),c.d(m,{CardComponent:()=>f});var _=c(6814),p=c(1120),t=c(4769),C=c(6286),a=c(2425);function g(n,h){if(1&n){const r=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div"),t._UZ(3,"img",10),t.qZA()(),t.TgZ(4,"div",11)(5,"div",12)(6,"div",13)(7,"h3",14),t._uU(8),t.qZA(),t.TgZ(9,"p",15),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"button",16,17),t.NdJ("click",function(){const s=t.CHM(r).$implicit,u=t.MAs(13),l=t.oxw(2);return t.KtG(l.removeItem(s.product._id,u))}),t._UZ(14,"i",18),t._uU(15," Remove"),t.qZA()(),t.TgZ(16,"div",19)(17,"button",20,21),t.NdJ("click",function(){const s=t.CHM(r).$implicit,u=t.MAs(18),l=t.oxw(2);return t.KtG(l.changeCount(s.count-1,s.product._id,u))}),t._uU(19,"-"),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA(),t.TgZ(22,"button",20,22),t.NdJ("click",function(){const s=t.CHM(r).$implicit,u=t.MAs(23),l=t.oxw(2);return t.KtG(l.changeCount(s.count+1,s.product._id,u))}),t._uU(24,"+"),t.qZA()()()()()}if(2&n){const r=h.$implicit;t.xp6(3),t.Q6J("src",r.product.imageCover,t.LSH)("alt",r.product.title),t.xp6(5),t.Oqu(r.product.title),t.xp6(2),t.hij("Price: ",t.xi3(11,5,r.price,"e\xa3 "),""),t.xp6(11),t.Oqu(r.count)}}const i=function(n){return["/payment",n]};function d(n,h){if(1&n){const r=t.EpF();t.TgZ(0,"section",2)(1,"h1",3),t._uU(2,"Shop Cart"),t.qZA(),t.TgZ(3,"button",4),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.clearCart())}),t._uU(4,"Clear Your Cart"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.YNc(8,g,25,8,"div",5),t.TgZ(9,"button",6),t._uU(10,"Online Payment "),t._UZ(11,"img",7),t.qZA()()}if(2&n){const r=t.oxw();t.xp6(6),t.hij("Total Price: ",t.xi3(7,3,r.cartProduct.totalCartPrice,"e\xa3 "),""),t.xp6(2),t.Q6J("ngForOf",r.cartProduct.products),t.xp6(1),t.Q6J("routerLink",t.VKq(6,i,r.cartProduct._id))}}function v(n,h){1&n&&(t.TgZ(0,"h2",23),t._uU(1,"Your Cart Is Empty . . . ."),t.qZA())}let f=(()=>{class n{constructor(r,e,o){this._CartService=r,this._Renderer2=e,this._ToastrService=o,this.cartProduct=null,this.test=0}ngOnInit(){this.test=this._CartService.cartNumber,0!==this.test._value&&this._CartService.getCardProduct().subscribe({next:r=>{0!==r.numOfCartItems&&(this.cartProduct=r.data)}})}removeItem(r,e){this._Renderer2.setAttribute(e,"disabled","true"),this.cartProduct&&this._CartService.removeCardProduct(r).subscribe({next:o=>{this._ToastrService.info("Deleted Successfull"),this._Renderer2.removeAttribute(e,"disabled"),this.cartProduct=o.data,this._CartService.cartNumber.next(o.numOfCartItems)},error:o=>{this._Renderer2.removeAttribute(e,"disabled"),this._ToastrService.info("Deleted Successfull")}})}changeCount(r,e,o){r>=1&&(this._Renderer2.setAttribute(o,"disabled","true"),this._CartService.updateCardProduct(e,r).subscribe({next:s=>{this._Renderer2.removeAttribute(o,"disabled"),this.cartProduct=s.data},error:s=>{this._Renderer2.removeAttribute(o,"disabled")}}))}clearCart(){this._CartService.clearCard().subscribe({next:r=>{this._ToastrService.info("All Products Are Deleted"),this.cartProduct=null,this._CartService.cartNumber.next(0)}})}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(C.N),t.Y36(t.Qsj),t.Y36(a._W))};static#r=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-card"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","container shadow bg-main-light p-3 mb-3 rounded mx-auto",4,"ngIf","ngIfElse"],["msg",""],[1,"container","shadow","bg-main-light","p-3","mb-3","rounded","mx-auto"],[1,"h2"],[1,"clear-btn","btn","d-block","ms-auto",3,"click"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"btn","btn-primary","d-block","mx-auto","mt-3",3,"routerLink"],["src","./assets/images/visa-mastercard.png","alt","visa",1,"visa"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11"],[1,"d-flex","justify-content-between","align-items-center"],[1,"w-75"],[1,"h6"],[1,"mb-0"],[1,"btn-reomve","border-0",3,"click"],["btnRemove",""],[1,"fas","fa-trash-can"],[1,"countBtn"],[1,"btn","btn-sm","border-success","px-2","mx-2",3,"click"],["btn1",""],["btn2",""],[1,"text-center"]],template:function(e,o){if(1&e&&(t.YNc(0,d,12,8,"section",0),t.YNc(1,v,2,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",o.cartProduct)("ngIfElse",s)}},dependencies:[_.ez,_.sg,_.O5,_.H9,p.rH],styles:[".btn-reomve[_ngcontent-%COMP%]{color:#d10606}.btn-reomve[_ngcontent-%COMP%]:disabled{color:#e96666;cursor:not-allowed}.countBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:#0aad0a!important;color:#000!important}.countBtn[_ngcontent-%COMP%]:disabled{border-color:#8fdb8f!important;color:#777272!important;cursor:not-allowed}.clear-btn[_ngcontent-%COMP%]{border-color:#d10606!important;color:#000!important;transform:translateY(-100%)}.clear-btn[_ngcontent-%COMP%]:disabled{border-color:#e96666!important;color:#777272!important;cursor:not-allowed}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#d10606!important;color:#f5f5f5!important}.visa[_ngcontent-%COMP%]{width:50px}"]})}return n})()},6286:(b,m,c)=>{c.d(m,{N:()=>C});var _=c(5619),p=c(4769),t=c(9862);let C=(()=>{class a{constructor(i){this._HttpClient=i,this.cartNumber=new _.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(i){return this._HttpClient.post(this.baseUrl+"cart",{productId:i})}getCardProduct(){return this._HttpClient.get(this.baseUrl+"cart")}removeCardProduct(i){return this._HttpClient.delete(this.baseUrl+`cart/${i}`)}updateCardProduct(i,d){return this._HttpClient.put(this.baseUrl+`cart/${i}`,{count:d})}clearCard(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(i,d){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${i}?url=http://localhost:4200`,{shippingAddress:d})}static#t=this.\u0275fac=function(d){return new(d||a)(p.LFG(t.eN))};static#r=this.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);